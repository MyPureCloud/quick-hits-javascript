{
  "name": "Genesys Function Example - Get Active Conversations For User",
  "integrationType": "function-data-actions",
  "actionType": "custom",
  "config": {
    "request": {
      "requestType": "POST",
      "headers": {
        "x-gc-id": "$!{credentials.GC_CLIENT_ID}",
        "x-gc-secret": "$!{credentials.GC_CLIENT_SECRET}",
        "x-gc-region": "$!{credentials.GC_REGION}"
      },
      "requestTemplate": "{ \"inputType\": \"$!{input.inputType}\",  \"inputId\": \"$!{input.inputId}\",  \"conversationId\": \"$!{input.conversationId}\",  \"mediaType\": \"$!{input.mediaType}\" }"
    },
    "response": {
      "translationMap": {},
      "translationMapDefaults": {},
      "successTemplate": "${rawResult}"
    }
  },
  "contract": {
    "input": {
      "inputSchema": {
        "$schema": "http://json-schema.org/draft-04/schema#",
        "type": "object",
        "required": [
          "inputType",
          "inputId",
          "mediaType"
        ],
        "properties": {
          "inputType": {
            "type": "string",
            "description": "Select Username, Email or EmployeeId",
            "enum": [
              "USERNAME",
              "EMAIL",
              "EMPLOYEE_ID"
            ]
          },
          "inputId": {
            "description": "Id - Username, Email or EmployeeId",
            "type": "string"
          },
          "mediaType": {
            "type": "string",
            "description": "Select all or call, callback, email, ...",
            "enum": [
              "ALL",
              "CALL",
              "CALLBACK",
              "EMAIL",
              "MESSAGE",
              "CHAT"
            ]
          }
        },
        "additionalProperties": false
      }
    },
    "output": {
      "successSchema": {
        "$schema": "http://json-schema.org/draft-04/schema#",
        "type": "object",
        "properties": {
          "status": {
            "description": "Status of the request (false if failed)",
            "type": "boolean"
          },
          "userId": {
            "description": "Id of the User",
            "type": "string"
          },
          "userPresence": {
            "description": "Presence of the User",
            "type": "string"
          },
          "userRoutingStatus": {
            "description": "Routing Status of the User",
            "type": "string"
          },
          "nbActiveConversations": {
            "description": "Number of Active Conversations for the User",
            "type": "number"
          },
          "associatedStation": {
            "description": "True if user has an associated station",
            "type": "boolean"
          },
          "activeConversations": {
            "type": "array",
            "items": {
              "title": "ConversationId",
              "type": "string"
            }
          },
          "errorMesssage": {
            "description": "Error Message if the request failed",
            "type": "string"
          }
        },
        "additionalProperties": false
      }
    }
  },
  "secure": false
}